<section class="min">
    <div class="investorBids-container">
        <div class="has-bottom-index align-center">
            <div class="investorBids-header min-header align-center">
                <h3>Self Evaluation Form</h3>
            </div>
        </div>
        <div class="investorBids-body min-body" *ngIf="loading==false">
            <div class="col-md-12 x_panel" *ngIf="activityPlan.id; else noActivePlan">
                <div class="" >
                    <div class="x_title">
                        <h4><i class="fa fa-map-o"></i> Report the Progress</h4>
                        <div class="panel_toolbox">
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                       <div class="col-md-12">
                           <div *ngIf="activityPlan.reportStatusId && activityPlan.reportStatusId != 3">
                               <app-activities
                                       *ngIf="activityPlan && activityPlan.rootActivity"
                                       [activity]="activityPlan.rootActivity"
                                       [reportingMode]="true"
                                       [readonlyReporting]="false"
                               ></app-activities>
                           </div>
                           <hr>
                       </div>
                        <div class="col-md-6">
                            <div class="x_title">
                                <h4>Progress Report Document</h4>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="land-document" *ngIf="activityPlan.reportDocuments?.length > 0">
                                    <div >
                                        <div class="camistron" *ngFor="let doc of activityPlan.reportDocuments; let i of index">
                                            <table class="table">
                                                <tr>
                                                    <td><a><i class="fa fa-file-o"></i>  <label>{{doc.filename}}</label> </a></td>
                                                    <td> <a>    Ref: {{doc.ref}}    |   Date: {{doc.date | date}}  |    Note: {{doc.note}}
                                                    </a></td>
                                                    <td class="align-right"><button class="btn btn-sm btn-warning" (click)="deleteDoc(i)"><i class="fa fa-trash-o"></i></button></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>


                                </div>
                                <div class="form-group">
                                    <label>Upload Document *</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control"  disabled="disabled" placeholder="Upload Document" id="uploadDocLabel">
                                        <span class="input-group-btn">
                                              <button type="button" class="btn btn-camis" id="uploadDocTrigger" (click)="DocUploadTrigger()"><i class="fa fa-binoculars"></i></button>
                                          </span></div>
                                    <input type="file" id="uploadDoc" style="display: none;" (change)="handleDocumentUpload($event)" >
                                </div>
                                <div class="form-group">
                                    <label>Document Reference*</label>
                                    <input type="text" class="form-control" [(ngModel)]="document.ref">
                                </div>
                                <div class="form-group">
                                    <label>Document Date *</label>
                                    <input type="date" class="form-control" [(ngModel)]="document.date">
                                </div>
                                <div class="form-group">
                                    <label>Note *</label>
                                    <textarea class="form-control" rows="3" [(ngModel)]="document.note"></textarea>
                                </div>
                                <div class="form-group" >
                                    <button class="btn btn-camis-primary">Reset</button>
                                    <button class="btn btn-camis" (click)="saveDocument()">Add Document</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="x_title">
                                <h4>Progress Report</h4>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="form-group">
                                    <label>Status *</label>
                                    <select class="form-control" [(ngModel)]="activityPlan.reportStatusId">
                                        <option *ngFor="let statusType of statusTypes" [value]="statusType.id">{{statusType.name}}</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Progress Input Type *</label>
                                    <select class="form-control" [(ngModel)]="activityPlan.isAdditional">
                                        <option [value]="false">Cumulative</option>
                                        <option [value]="true">Additional</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Report Date *</label>
                                    <input type="date" class="form-control"  [(ngModel)]="activityPlan.reportDate">
                                </div>
                                <div class="form-group">
                                    <label>Note *</label>
                                    <textarea class="form-control" rows="3" [(ngModel)]="activityPlan.reportNote"></textarea>
                                </div>
                            </div>
                        </div>
                       
                        
                        <div class="col-md-12">
                            <hr>
                            <div class="form-group align-right">
                                <button class="normal btn-camis-default">Cancel</button>
                                <button class="normal btn-camis" (click)="encodeProgressReport()">Submit Report</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ng-template #noActivePlan>
                <div class="col-md-12 x_panel">
                    <div class="x_content align-center">
                        <i class="fa fa-info-circle no-data"></i>
                        <h4>There are no Active Workflow</h4>
                        <p>Please try later</p>
                    </div>
                </div>
            </ng-template>
            
        </div>

        <div class="investorBids-body min-body" *ngIf="loading==true">
            <div class="align-center bid-loader" >
                <i class="fa fa-circle-o faa-burst animated"></i>
            </div>

        </div>
    </div>
</section>